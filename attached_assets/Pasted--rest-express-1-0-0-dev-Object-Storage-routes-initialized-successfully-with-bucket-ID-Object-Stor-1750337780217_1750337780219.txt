> rest-express@1.0.0 dev
Object Storage routes initialized successfully with bucket ID
Object Storage Final client initialized - OBJECT STORAGE ONLY mode
Environment: development
[Startup] Beginning server initialization...
[Startup] Verifying database connection...
New database client connected
[Startup] Database connection verified 331 ms
[Startup] Registering routes...
[Startup] Routes registered 339 ms
[Startup] Setting up shared files path handler for cross-environment compatibility
[Startup] Setting up Object Storage-only uploads handler
[Startup] Setting up Vite...
[Startup] Vite setup complete 383 ms
Running database migrations...
Running migrations...
New database client connected
Added achievement_notifications_enabled column to users table
Added notification_time column to users table
Created achievement_types table if not exists
Created user_achievements table if not exists
Migrations completed successfully
Migrations complete.
[Server Startup] Attempt 1 of 5
[Port Cleanup] Attempting lsof cleanup...
[Port Cleanup] lsof failed, trying netstat... Error: Command failed: lsof -i :5000

    at genericNodeError (node:internal/errors:984:15)
    at wrappedFn (node:internal/errors:538:14)
    at ChildProcess.exithandler (node:child_process:422:12)
    at ChildProcess.emit (node:events:518:28)
    at maybeClose (node:internal/child_process:1104:16)
    at ChildProcess._handle.onexit (node:internal/child_process:304:5) {
  code: 1,
  killed: false,
  signal: null,
  cmd: 'lsof -i :5000',
  stdout: '',
  stderr: ''
}
[Port Cleanup] No active process found on port 5000
[Port Cleanup] Attempting lsof cleanup...
[Port Cleanup] lsof failed, trying netstat... Error: Command failed: lsof -i :5000

    at genericNodeError (node:internal/errors:984:15)
    at wrappedFn (node:internal/errors:538:14)
    at ChildProcess.exithandler (node:child_process:422:12)
    at ChildProcess.emit (node:events:518:28)
    at maybeClose (node:internal/child_process:1104:16)
    at ChildProcess._handle.onexit (node:internal/child_process:304:5) {
  code: 1,
  killed: false,
  signal: null,
  cmd: 'lsof -i :5000',
  stdout: '',
  stderr: ''
}
[Port Cleanup] No active process found on port 5000
[Port Cleanup] Attempting lsof cleanup...
[Port Cleanup] lsof failed, trying netstat... Error: Command failed: lsof -i :5001

    at genericNodeError (node:internal/errors:984:15)
    at wrappedFn (node:internal/errors:538:14)
    at ChildProcess.exithandler (node:child_process:422:12)
    at ChildProcess.emit (node:events:518:28)
    at maybeClose (node:internal/child_process:1104:16)
    at ChildProcess._handle.onexit (node:internal/child_process:304:5) {
  code: 1,
  killed: false,
  signal: null,
  cmd: 'lsof -i :5001',
  stdout: '',
  stderr: ''
}
[Port Cleanup] No active process found on port 5001
[Port Cleanup] Attempting lsof cleanup...
[Port Cleanup] lsof failed, trying netstat... Error: Command failed: lsof -i :5002

    at genericNodeError (node:internal/errors:984:15)
    at wrappedFn (node:internal/errors:538:14)
    at ChildProcess.exithandler (node:child_process:422:12)
    at ChildProcess.emit (node:events:518:28)
    at maybeClose (node:internal/child_process:1104:16)
    at ChildProcess._handle.onexit (node:internal/child_process:304:5) {
  code: 1,
  killed: false,
  signal: null,
  cmd: 'lsof -i :5002',
  stdout: '',
  stderr: ''
}
[Port Cleanup] No active process found on port 5002
[Server Startup] Starting new server on port 5000...
12:53:48 PM [express] [Server Startup] Server listening on port 5000
12:53:50 PM [express] GET / 200 in 315ms
Browserslist: browsers data (caniuse-lite) is 8 months old. Please run:
  npx update-browserslist-db@latest
  Why you should do it regularly: https://github.com/browserslist/update-db#readme
12:53:52 PM [express] GET /src/main.tsx 200 in 1734ms
12:53:53 PM [express] GET /@vite/client 200 in 2981ms
New database client connected
12:53:54 PM [express] GET /@fs/home/runner/workspace/node_modules/vite/dist/client/env.mjs 304 in 103…
12:53:54 PM [express] GET /@react-refresh 304 in 119ms
12:53:54 PM [express] GET /src/App.tsx 200 in 102ms
12:53:54 PM [express] GET /src/index.css 200 in 77ms
12:53:54 PM [express] GET /src/lib/queryClient.ts 304 in 146ms
12:53:54 PM [express] GET /src/components/error-boundary.tsx 304 in 92ms
12:53:55 PM [express] GET /src/hooks/use-auth.tsx 304 in 145ms
12:53:55 PM [express] GET /src/hooks/use-achievements.tsx 304 in 95ms
12:53:55 PM [express] GET /src/components/ui/toaster.tsx 304 in 98ms
12:53:55 PM [express] GET /src/pages/auth-page.tsx 304 in 147ms
12:53:55 PM [express] GET /src/pages/home-page.tsx 304 in 145ms
12:53:55 PM [express] GET /src/pages/activity-page.tsx 304 in 145ms
12:53:55 PM [express] GET /src/pages/activity-management.tsx 304 in 135ms
12:53:55 PM [express] GET /src/pages/help-page.tsx 304 in 126ms
12:53:55 PM [express] GET /src/pages/notifications-page.tsx 304 in 134ms
12:53:55 PM [express] GET /src/pages/admin-page.tsx 304 in 144ms
12:53:55 PM [express] GET /src/pages/menu-page.tsx 304 in 145ms
12:53:55 PM [express] GET /src/components/vertical-nav.tsx 304 in 117ms
12:53:55 PM [express] GET /src/pages/notification-settings-page.tsx 304 in 130ms
12:53:55 PM [express] GET /src/pages/leaderboard-page.tsx 304 in 116ms
12:53:55 PM [express] GET /src/debug-api.tsx 304 in 151ms
12:53:56 PM [express] GET /src/components/achievements/achievements-container.tsx 304 in 148ms
12:53:56 PM [express] GET /src/pages/prayer-requests-page.tsx 304 in 145ms
12:53:56 PM [express] GET /src/pages/storage-test-page.tsx 304 in 151ms
12:53:56 PM [express] GET /src/pages/video-player-page.tsx 304 in 125ms
12:53:56 PM [express] GET /src/pages/comments-page.tsx 304 in 107ms
12:53:56 PM [express] GET /src/hooks/use-toast.ts 304 in 141ms
12:53:56 PM [express] GET /src/components/ui/toast.tsx 304 in 151ms
12:53:56 PM [express] GET /src/components/ui/card.tsx 304 in 149ms
12:53:56 PM [express] GET /src/components/ui/button.tsx 304 in 152ms
12:53:56 PM [express] GET /src/components/ui/input.tsx 304 in 126ms
12:53:56 PM [express] GET /src/components/ui/form.tsx 304 in 105ms
12:53:56 PM [express] GET /@fs/home/runner/workspace/shared/schema.ts 304 in 147ms
12:53:57 PM [express] GET /src/components/ui/tabs.tsx 304 in 147ms
12:53:57 PM [express] GET /src/components/post-card.tsx 304 in 150ms
12:53:57 PM [express] GET /src/components/create-post-dialog.tsx 304 in 146ms
12:53:57 PM [express] GET /src/hooks/use-post-limits.ts 304 in 133ms
12:53:57 PM [express] GET /src/components/app-layout.tsx 304 in 117ms
12:53:57 PM [express] GET /src/hooks/use-mobile.tsx 304 in 124ms
12:53:57 PM [express] GET /src/components/messaging/message-slide-card.tsx 304 in 148ms
12:53:57 PM [express] GET /src/hooks/use-prayer-requests.tsx 304 in 152ms
12:53:57 PM [express] GET /src/components/bottom-nav.tsx 304 in 145ms
12:53:57 PM [express] GET /src/components/ui/collapsible.tsx 304 in 141ms
12:53:57 PM [express] GET /src/components/ui/youtube-player.tsx 304 in 126ms
12:53:57 PM [express] GET /src/components/ui/activity-content.css 304 in 102ms
12:53:57 PM [express] GET /src/components/ui/duplicate-video-detector.tsx 304 in 144ms
12:53:58 PM [express] GET /src/components/ui/fix-duplicate-video.css 304 in 150ms
12:53:58 PM [express] GET /src/components/ui/dialog.tsx 304 in 147ms
12:53:58 PM [express] GET /src/components/ui/label.tsx 304 in 150ms
12:53:58 PM [express] GET /src/components/ui/scroll-area.tsx 304 in 136ms
12:53:58 PM [express] GET /src/components/rich-text-editor.tsx 304 in 139ms
12:53:58 PM [express] GET /src/components/achievements/achievement-demo.tsx 304 in 147ms
12:53:58 PM [express] GET /src/components/ui/sheet.tsx 304 in 146ms
12:53:58 PM [express] GET /src/components/ui/avatar.tsx 304 in 149ms
12:53:58 PM [express] GET /src/pages/profile-page.tsx 304 in 145ms
12:53:58 PM [express] GET /src/pages/support-sparta-page.tsx 304 in 138ms
12:53:58 PM [express] GET /src/components/notification-settings.tsx 304 in 140ms
12:53:58 PM [express] GET /src/lib/utils.ts 304 in 136ms
12:53:58 PM [express] GET /src/hooks/use-notifications.tsx 304 in 146ms
12:53:58 PM [express] GET /src/components/ui/tooltip.tsx 304 in 151ms
12:53:59 PM [express] GET /src/components/achievements/achievement-badge.tsx 304 in 195ms
12:53:59 PM [express] GET /src/components/test-file-upload.tsx 304 in 125ms
12:53:59 PM [express] GET /src/components/comments/post-view.tsx 304 in 146ms
12:53:59 PM [express] GET /src/components/comments/comment-list.tsx 304 in 118ms
12:53:59 PM [express] GET /src/components/comments/comment-form.tsx 304 in 148ms
12:53:59 PM [express] GET /src/components/ui/alert-dialog.tsx 304 in 146ms
12:53:59 PM [express] GET /src/components/reaction-button.tsx 304 in 145ms
12:53:59 PM [express] GET /src/components/reaction-summary.tsx 304 in 111ms
12:53:59 PM [express] GET /src/hooks/use-comment-count.tsx 304 in 143ms
12:53:59 PM [express] GET /src/components/comments/comment-drawer.tsx 200 in 139ms
12:53:59 PM [express] GET /src/lib/media-utils.ts 304 in 146ms
12:53:59 PM [express] GET /src/components/ui/textarea.tsx 304 in 153ms
12:53:59 PM [express] GET /src/components/ui/popover.tsx 304 in 136ms
12:53:59 PM [express] GET /src/components/ui/calendar.tsx 304 in 158ms
12:54:00 PM [express] GET /src/lib/url-utils.ts 200 in 152ms
12:54:00 PM [express] GET /src/components/messaging/message-form.tsx 304 in 129ms
New database client connected
12:54:00 PM [express] GET /src/components/ui/video-player.tsx 304 in 168ms
12:54:00 PM [express] GET /src/components/change-password-form.tsx 304 in 152ms
12:54:00 PM [express] GET /src/components/ui/badge.tsx 304 in 148ms
12:54:00 PM [express] GET /src/lib/image-utils.ts 200 in 147ms
12:54:00 PM [express] GET /src/components/ui/switch.tsx 304 in 147ms
12:54:00 PM [express] GET /src/lib/object-storage-utils.ts 304 in 151ms
12:54:00 PM [express] GET /src/components/comments/comment-actions-drawer.tsx 304 in 139ms
12:54:00 PM [express] GET /src/components/ui/dropdown-menu.tsx 304 in 75ms
12:54:00 PM [express] GET /src/lib/memory-verse-utils.ts 304 in 76ms
12:54:00 PM [express] GET /src/components/ui/video-player.css 304 in 75ms
GET /api/user - Session: qxhQBsSyiKVjdH5IuM42YopCrAsbf0iF
GET /api/user - Is Authenticated: true
Authenticated user: 419
WebSocket client connected at 2025-06-19T12:54:01.649Z
Sent connection confirmation message to client
12:54:01 PM [express] GET /api/notifications 304 in 303ms :: [{"id":883,"userId":419,"title":"Daily R…
12:54:01 PM [express] GET /api/prayer-requests/unread 200 in 153ms
Found 0 unread messages for user 419
WebSocket client connected at 2025-06-19T12:54:02.047Z
Sent connection confirmation message to client
New database client connected
12:54:02 PM [express] GET /api/messages/unread/count 304 in 300ms :: {"unreadCount":0}
12:54:02 PM [express] GET /api/users/me 304 in 294ms :: {"id":419,"username":"rmiller","preferredName…
12:54:02 PM [express] GET /api/achievements/unviewed 304 in 257ms :: []
WebSocket client connected at 2025-06-19T12:54:02.892Z
Sent connection confirmation message to client
New database client connected
12:54:02 PM [express] GET /api/notifications/unread 304 in 331ms :: {"unreadCount":0}
12:54:02 PM [express] GET /api/prayer-requests/unread 200 in 185ms
12:54:03 PM [express] GET /sparta_circle_red.png 304 in 106ms
12:54:03 PM [express] GET /api/posts/688/reactions 200 in 271ms :: []
12:54:03 PM [express] GET /api/posts/685/reactions 200 in 289ms :: []
12:54:03 PM [express] GET /api/posts/points/weekly 200 in 151ms
12:54:04 PM [express] GET /api/posts/664/reactions 200 in 291ms :: []
12:54:04 PM [express] GET /api/posts/501/reactions 200 in 299ms :: [{"id":121,"userId":419,"postId":5…
12:54:04 PM [express] GET /api/posts/479/reactions 200 in 271ms :: []
12:54:04 PM [express] GET /api/posts/394/reactions 200 in 288ms :: []
12:54:04 PM [express] GET /api/posts/306/reactions 200 in 292ms :: []
12:54:05 PM [express] GET /api/posts/16/reactions 200 in 265ms :: []
12:54:05 PM [express] GET /api/posts/points/weekly 200 in 108ms
^ANew database client connected
^ANew database client connected