
> rest-express@1.0.0 dev
Object Storage Final client initialized - OBJECT STORAGE ONLY mode
Object Storage client initialized with bucket ID - functionality will be tested on first use
Running database migrations...
Running migrations...
Added achievement_notifications_enabled column to users table
Added waiver_signed column to users table
Added waiver_signed_at column to users table
Added waiver_signature column to users table
Added notification_time column to users table
Added timezone_offset column to users table
Added daily_notifications_enabled column to users table
Added confirmation_messages_enabled column to users table
Added program_start_date column to users table
Added is_group_admin column to users table
Added admin_group_id column to users table
Added max_size column to teams table
Added status column to organizations table
Added status column to groups table
Added status column to teams table
Added avatar_color column to users table
Added competitive column to groups table
Created achievement_types table if not exists
Created user_achievements table if not exists
Migrations completed successfully
Migrations complete.
Environment: development
[Server Startup] Starting server on port 5000...
1:10:35 PM [express] [Server Startup] Server listening on port 5000
[Startup] Server ready and accepting connections!
[Post-Startup] Beginning initialization...
=== REGISTER ROUTES CALLED ===
[Post-Startup] Setting up Vite...
[Post-Startup] Initialization complete
[NOTIFICATION SCHEDULER] Interval set successfully - will check every hour on the hour
1:10:36 PM [express] GET / 200 in 362ms
Browserslist: browsers data (caniuse-lite) is 13 months old. Please run:
  npx update-browserslist-db@latest
  Why you should do it regularly: https://github.com/browserslist/update-db#readme
1:10:38 PM [express] GET /src/main.tsx 200 in 1241ms
1:10:38 PM [express] GET /@react-refresh 304 in 1240ms
1:10:39 PM [express] GET /@vite/client 200 in 2643ms
1:10:40 PM [express] GET /src/index.css 200 in 318ms
1:10:40 PM [express] GET /src/App.tsx 200 in 121ms
1:10:41 PM [express] GET /@fs/home/runner/workspace/node_modules/vite/dist/client/env.mjs 304 in 389…
1:10:41 PM [express] GET /src/lib/queryClient.ts 304 in 221ms
1:10:41 PM [express] GET /src/components/error-boundary.tsx 304 in 224ms
1:10:41 PM [express] GET /src/hooks/use-auth.tsx 304 in 222ms
1:10:42 PM [express] GET /src/hooks/use-achievements.tsx 304 in 223ms
1:10:42 PM [express] GET /src/pages/auth-page.tsx 304 in 230ms
1:10:42 PM [express] GET /src/components/ui/toaster.tsx 304 in 225ms
1:10:42 PM [express] GET /src/pages/home-page.tsx 304 in 224ms
1:10:42 PM [express] GET /src/pages/activity-page.tsx 304 in 221ms
1:10:42 PM [express] GET /src/pages/activity-management.tsx 304 in 231ms
1:10:42 PM [express] GET /src/pages/help-page.tsx 304 in 220ms
1:10:42 PM [express] GET /src/pages/notifications-page.tsx 304 in 229ms
1:10:42 PM [express] GET /src/pages/admin-page.tsx 304 in 214ms
1:10:43 PM [express] GET /src/pages/group-admin-page.tsx 304 in 220ms
1:10:43 PM [express] GET /src/pages/menu-page.tsx 304 in 221ms
1:10:43 PM [express] GET /src/components/vertical-nav.tsx 304 in 225ms
1:10:43 PM [express] GET /src/pages/notification-settings-page.tsx 304 in 220ms
1:10:43 PM [express] GET /src/pages/leaderboard-page.tsx 304 in 222ms
1:10:43 PM [express] GET /src/debug-api.tsx 304 in 201ms
1:10:43 PM [express] GET /src/components/achievements/achievements-container.tsx 304 in 222ms
1:10:43 PM [express] GET /src/pages/prayer-requests-page.tsx 304 in 225ms
1:10:44 PM [express] GET /src/pages/video-player-page.tsx 304 in 227ms
1:10:44 PM [express] GET /src/pages/comments-page.tsx 304 in 224ms
1:10:44 PM [express] GET /src/pages/waiver-page.tsx 304 in 224ms
1:10:44 PM [express] GET /src/hooks/use-toast.ts 304 in 198ms
1:10:44 PM [express] GET /src/components/ui/card.tsx 304 in 223ms
1:10:44 PM [express] GET /src/components/ui/button.tsx 304 in 222ms
1:10:44 PM [express] GET /src/components/ui/input.tsx 304 in 227ms
1:10:44 PM [express] GET /src/components/ui/form.tsx 304 in 222ms
1:10:44 PM [express] GET /@fs/home/runner/workspace/shared/schema.ts 304 in 225ms
1:10:44 PM [express] GET /src/components/ui/tabs.tsx 304 in 198ms
1:10:45 PM [express] GET /src/components/ui/toast.tsx 304 in 221ms
1:10:45 PM [express] GET /src/components/post-card.tsx 304 in 220ms
1:10:45 PM [express] GET /src/components/create-post-dialog.tsx 304 in 222ms
1:10:45 PM [express] GET /src/hooks/use-post-limits.ts 304 in 222ms
1:10:45 PM [express] GET /src/components/app-layout.tsx 304 in 223ms
1:10:45 PM [express] GET /src/hooks/use-mobile.tsx 304 in 199ms
1:10:45 PM [express] GET /src/components/messaging/message-slide-card.tsx 200 in 297ms
1:10:46 PM [express] GET /src/hooks/use-prayer-requests.tsx 304 in 368ms
1:10:46 PM [express] GET /src/components/ui/collapsible.tsx 304 in 336ms
1:10:46 PM [express] GET /src/components/ui/youtube-player.tsx 304 in 293ms
1:10:46 PM [express] GET /src/components/ui/select.tsx 304 in 218ms
1:10:46 PM [express] GET /src/hooks/use-restore-scroll.ts 304 in 221ms
1:10:46 PM [express] GET /src/components/ui/dialog.tsx 304 in 219ms
1:10:46 PM [express] GET /src/components/ui/label.tsx 304 in 220ms
1:10:46 PM [express] GET /src/components/ui/scroll-area.tsx 304 in 219ms
1:10:46 PM [express] GET /src/components/rich-text-editor.tsx 304 in 179ms
1:10:46 PM [express] GET /src/components/ui/textarea.tsx 304 in 223ms
1:10:46 PM [express] GET /src/components/ui/popover.tsx 304 in 191ms
1:10:47 PM [express] GET /src/components/ui/calendar.tsx 304 in 220ms
1:10:47 PM [express] GET /src/components/bottom-nav.tsx 304 in 227ms
1:10:47 PM [express] GET /src/hooks/use-swipe-to-close.ts 304 in 227ms
1:10:47 PM [express] GET /src/components/ui/alert-dialog.tsx 304 in 174ms
1:10:47 PM [express] GET /src/components/ui/checkbox.tsx 304 in 221ms
1:10:47 PM [express] GET /src/components/invite-qr-code.tsx 304 in 195ms
1:10:48 PM [express] GET /src/components/ui/badge.tsx 304 in 244ms
1:10:48 PM [express] GET /src/components/ui/sheet.tsx 304 in 239ms
1:10:48 PM [express] GET /src/pages/profile-page.tsx 304 in 290ms
1:10:48 PM [express] GET /src/pages/support-sparta-page.tsx 304 in 290ms
1:10:48 PM [express] GET /src/components/ui/avatar.tsx 304 in 460ms
1:10:48 PM [express] GET /src/pages/invite-code-page.tsx 304 in 359ms
1:10:48 PM [express] GET / 200 in 294ms
1:10:49 PM [express] GET /src/components/notification-settings.tsx 304 in 382ms
1:10:49 PM [express] GET /src/pages/welcome-page.tsx 304 in 370ms
1:10:49 PM [express] GET /src/lib/utils.ts 304 in 338ms
1:10:49 PM [express] GET /src/hooks/use-notifications.tsx 304 in 341ms
1:10:49 PM [express] GET /src/components/ui/tooltip.tsx 304 in 335ms
1:10:49 PM [express] GET /src/components/achievements/achievement-badge.tsx 304 in 312ms
1:10:49 PM [express] GET /src/main.tsx 200 in 310ms
1:10:49 PM [express] GET /@react-refresh 304 in 358ms
1:10:49 PM [express] GET /@vite/client 200 in 322ms
1:10:50 PM [express] GET /src/lib/media-utils.ts 304 in 304ms
1:10:50 PM [express] GET /src/components/comments/post-view.tsx 304 in 369ms
1:10:50 PM [express] GET /src/components/comments/comment-form.tsx 304 in 300ms
1:10:50 PM [express] GET /src/components/comments/comment-list.tsx 304 in 370ms
1:10:50 PM [express] GET /src/hooks/use-keyboard-adjustment.ts 304 in 368ms
1:10:50 PM [express] GET /src/components/signature-pad.tsx 304 in 303ms
1:10:50 PM [express] GET /src/App.tsx 200 in 304ms
1:10:50 PM [express] GET /src/index.css 200 in 310ms
1:10:50 PM [express] GET /@fs/home/runner/workspace/node_modules/vite/dist/client/env.mjs 304 in 362…
1:10:51 PM [express] GET /src/components/reaction-button.tsx 304 in 349ms
1:10:51 PM [express] GET /src/components/reaction-summary.tsx 304 in 380ms
1:10:51 PM [express] GET /src/hooks/use-comment-count.tsx 304 in 441ms
1:10:51 PM [express] GET /src/components/comments/comment-drawer.tsx 304 in 454ms
1:10:51 PM [express] GET /src/components/ui/video-player.tsx 304 in 441ms
1:10:51 PM [express] GET /src/components/ui/image-viewer.tsx 304 in 414ms
1:10:51 PM [express] GET /src/lib/queryClient.ts 304 in 404ms
1:10:51 PM [express] GET /src/components/error-boundary.tsx 304 in 443ms
1:10:51 PM [express] GET /src/components/ui/toaster.tsx 304 in 456ms
1:10:52 PM [express] GET /src/pages/auth-page.tsx 304 in 444ms
1:10:52 PM [express] GET /src/hooks/use-achievements.tsx 304 in 453ms
1:10:52 PM [express] GET /src/hooks/use-auth.tsx 304 in 454ms
1:10:52 PM [express] GET /src/lib/url-utils.ts 304 in 360ms
1:10:52 PM [express] GET /src/components/messaging/message-form.tsx 304 in 439ms
1:10:52 PM [express] GET /src/hooks/use-keyboard-adjustment-messages.ts 200 in 441ms
1:10:52 PM [express] GET /src/components/change-password-form.tsx 304 in 452ms
1:10:52 PM [express] GET /src/components/ui/switch.tsx 304 in 442ms
1:10:52 PM [express] GET /src/lib/image-utils.ts 304 in 447ms
1:10:53 PM [express] GET /src/pages/home-page.tsx 304 in 383ms
1:10:53 PM [express] GET /src/pages/activity-page.tsx 304 in 385ms
1:10:53 PM [express] GET /src/pages/activity-management.tsx 304 in 442ms
1:10:53 PM [express] GET /src/pages/help-page.tsx 304 in 378ms
1:10:53 PM [express] GET /src/pages/notifications-page.tsx 304 in 375ms
1:10:53 PM [express] GET /src/components/comments/comment-actions-drawer.tsx 304 in 392ms
1:10:53 PM [express] GET /src/pages/group-admin-page.tsx 304 in 610ms
1:10:53 PM [express] GET /src/components/ui/dropdown-menu.tsx 304 in 455ms
1:10:53 PM [express] GET /src/lib/memory-verse-utils.ts 304 in 453ms
1:10:54 PM [express] GET /src/components/ui/video-player.css 304 in 446ms
1:10:54 PM [express] GET /src/pages/menu-page.tsx 304 in 239ms
1:10:54 PM [express] GET /src/pages/admin-page.tsx 304 in 320ms
1:10:54 PM [express] GET /src/components/vertical-nav.tsx 304 in 246ms
1:10:54 PM [express] GET /src/pages/leaderboard-page.tsx 304 in 242ms
1:10:54 PM [express] GET /src/pages/notification-settings-page.tsx 304 in 315ms
GET /api/user - Session: HOp_5tfBNKPqU7RuWr-bkFMMlLrrUz1K
GET /api/user - Is Authenticated: true
GET /api/user - Session userId: undefined
GET /api/user - Passport user: 1
Authenticated user: 1
User data being returned: {"id":1,"username":"admin","avatarColor":"#F43F5E"}
1:10:54 PM [express] GET /src/debug-api.tsx 304 in 231ms
1:10:55 PM [express] GET /src/components/achievements/achievements-container.tsx 304 in 261ms
1:10:55 PM [express] GET /src/pages/prayer-requests-page.tsx 304 in 463ms
1:10:55 PM [express] GET /src/pages/video-player-page.tsx 304 in 485ms
1:10:55 PM [express] GET /src/pages/comments-page.tsx 304 in 469ms
1:10:55 PM [express] GET /src/pages/waiver-page.tsx 304 in 459ms
1:10:55 PM [express] GET /src/hooks/use-toast.ts 304 in 382ms
1:10:56 PM [express] GET /api/prayer-requests/unread 304 in 458ms :: {"unreadCount":0}
Found 0 unread messages for user 1
1:10:56 PM [express] GET /api/notifications 304 in 1017ms :: [{"id":1239,"userId":1,"title":"Daily R…
1:10:56 PM [express] GET /src/components/ui/toast.tsx 304 in 503ms
1:10:56 PM [express] GET /api/messages/unread/count 304 in 1064ms :: {"unreadCount":0}
1:10:56 PM [express] GET /api/posts/has-any-posts 304 in 1096ms :: {"hasAnyPosts":true}
1:10:56 PM [express] GET /src/components/ui/card.tsx 304 in 502ms
1:10:57 PM [express] GET /src/components/ui/input.tsx 304 in 490ms
1:10:57 PM [express] GET /src/components/ui/button.tsx 304 in 450ms
1:10:57 PM [express] GET /src/components/ui/form.tsx 304 in 489ms
1:10:57 PM [express] GET /api/teams/1/competitive 304 in 1592ms :: {"competitive":false}
1:10:57 PM [express] GET /src/components/ui/tabs.tsx 304 in 462ms
1:10:58 PM [express] GET /@fs/home/runner/workspace/shared/schema.ts 304 in 456ms
1:10:58 PM [express] GET /src/components/post-card.tsx 304 in 458ms
1:10:58 PM [express] GET /src/hooks/use-post-limits.ts 304 in 451ms
1:10:58 PM [express] GET /src/components/app-layout.tsx 304 in 455ms
1:10:58 PM [express] GET /src/hooks/use-mobile.tsx 304 in 457ms
1:10:58 PM [express] GET /api/users/me 304 in 910ms :: {"id":1,"username":"admin","preferredName":"A…
1:10:58 PM [express] GET /api/achievements/unviewed 304 in 880ms :: []
1:10:58 PM [express] GET /src/components/create-post-dialog.tsx 304 in 450ms
1:10:59 PM [express] GET /api/notifications/unread 304 in 878ms :: {"unreadCount":2}
1:10:59 PM [express] GET /api/activities/current 304 in 906ms :: {"currentWeek":33,"currentDay":6,"p…
1:10:59 PM [express] GET /src/hooks/use-prayer-requests.tsx 304 in 455ms
1:10:59 PM [express] GET /src/hooks/use-restore-scroll.ts 304 in 456ms
1:10:59 PM [express] GET /src/components/messaging/message-slide-card.tsx 200 in 453ms
1:10:59 PM [express] GET /src/components/ui/collapsible.tsx 304 in 454ms
1:10:59 PM [express] GET /src/components/ui/youtube-player.tsx 304 in 404ms
1:11:00 PM [express] GET /sparta_circle_red.png 304 in 451ms
1:11:00 PM [express] GET /api/prayer-requests/unread 304 in 425ms :: {"unreadCount":0}
1:11:00 PM [express] GET /src/components/ui/select.tsx 304 in 452ms
1:11:00 PM [express] GET /src/components/ui/dialog.tsx 304 in 302ms
1:11:01 PM [express] GET /src/components/ui/label.tsx 304 in 500ms
1:11:01 PM [express] GET /src/components/ui/scroll-area.tsx 304 in 461ms
1:11:01 PM [express] GET /src/components/rich-text-editor.tsx 304 in 460ms
1:11:01 PM [express] GET /src/components/ui/textarea.tsx 304 in 499ms
1:11:01 PM [express] GET /src/components/ui/badge.tsx 304 in 455ms
1:11:02 PM [express] GET /src/components/ui/alert-dialog.tsx 304 in 531ms
1:11:02 PM [express] GET /api/posts/773/reactions 200 in 1060ms :: []
1:11:02 PM [express] GET /api/posts/774/reactions 200 in 1283ms :: []
1:11:02 PM [express] GET /src/components/ui/popover.tsx 304 in 457ms
1:11:02 PM [express] GET /src/components/ui/calendar.tsx 304 in 451ms
1:11:02 PM [express] GET /src/components/ui/sheet.tsx 304 in 462ms
1:11:02 PM [express] GET /src/components/ui/avatar.tsx 304 in 471ms
1:11:03 PM [express] GET /src/pages/support-sparta-page.tsx 304 in 450ms
1:11:03 PM [express] GET /api/posts/771/reactions 200 in 855ms :: []
1:11:03 PM [express] GET /src/pages/invite-code-page.tsx 304 in 455ms
1:11:04 PM [express] GET /src/pages/profile-page.tsx 304 in 452ms
1:11:04 PM [express] GET /src/pages/welcome-page.tsx 304 in 449ms
1:11:04 PM [express] GET /src/components/bottom-nav.tsx 304 in 526ms
1:11:04 PM [express] GET /src/components/notification-settings.tsx 304 in 678ms
1:11:04 PM [express] GET /api/posts/710/reactions 200 in 1054ms :: []
1:11:04 PM [express] GET /api/posts/693/reactions 200 in 979ms :: []
1:11:04 PM [express] GET /src/hooks/use-swipe-to-close.ts 304 in 446ms
1:11:05 PM [express] GET /src/components/ui/checkbox.tsx 304 in 377ms
1:11:05 PM [express] GET /api/posts/688/reactions 200 in 885ms :: []
1:11:05 PM [express] GET /src/components/invite-qr-code.tsx 304 in 377ms
1:11:05 PM [express] GET /src/lib/utils.ts 304 in 437ms
1:11:05 PM [express] GET /src/hooks/use-notifications.tsx 304 in 446ms
1:11:05 PM [express] GET /src/components/ui/tooltip.tsx 304 in 441ms
1:11:06 PM [express] GET /api/posts/664/reactions 200 in 877ms :: []
1:11:06 PM [express] GET /api/posts/501/reactions 200 in 889ms :: [{"id":121,"userId":419,"postId":5…
1:11:06 PM [express] GET /src/components/achievements/achievement-badge.tsx 304 in 440ms
1:11:06 PM [express] GET /src/lib/media-utils.ts 304 in 430ms
1:11:06 PM [express] GET /src/components/comments/post-view.tsx 304 in 447ms
1:11:06 PM [express] GET /src/components/comments/comment-list.tsx 304 in 430ms
1:11:06 PM [express] GET /src/components/comments/comment-form.tsx 304 in 427ms
1:11:06 PM [express] GET /src/hooks/use-keyboard-adjustment.ts 304 in 446ms
1:11:07 PM [express] GET /api/posts/479/reactions 200 in 841ms :: []
1:11:07 PM [express] GET /src/components/signature-pad.tsx 304 in 442ms
1:11:07 PM [express] GET /api/posts/394/reactions 200 in 869ms :: []
1:11:07 PM [express] GET /api/posts/306/reactions 200 in 903ms :: []
1:11:08 PM [express] GET /src/components/reaction-summary.tsx 304 in 443ms
1:11:08 PM [express] GET /src/components/reaction-button.tsx 304 in 459ms
1:11:08 PM [express] GET /src/hooks/use-comment-count.tsx 304 in 446ms
1:11:08 PM [express] GET /src/components/comments/comment-drawer.tsx 304 in 412ms
1:11:08 PM [express] GET /src/components/ui/video-player.tsx 304 in 384ms
Attempting to download file from Object Storage: shared/uploads/1761256592431-image.jpeg
Attempting to download file from Object Storage: shared/uploads/1761010718301-image.jpeg
1:11:08 PM [express] GET /api/posts/16/reactions 200 in 747ms :: []
1:11:09 PM [express] GET /src/components/ui/image-viewer.tsx 304 in 315ms
1:11:09 PM [express] GET /src/lib/url-utils.ts 304 in 226ms
Download result for shared/uploads/1761010718301-image.jpeg: { type: 'object', hasOkProperty: true, isBuffer: false }
Successfully downloaded shared/uploads/1761010718301-image.jpeg, size: 22197 bytes
1:11:09 PM [express] GET /src/components/messaging/message-form.tsx 304 in 244ms
Download result for shared/uploads/1761256592431-image.jpeg: { type: 'object', hasOkProperty: true, isBuffer: false }
Successfully downloaded shared/uploads/1761256592431-image.jpeg, size: 12687 bytes
1:11:09 PM [express] GET /src/hooks/use-keyboard-adjustment-messages.ts 200 in 225ms
1:11:09 PM [express] GET /src/components/change-password-form.tsx 304 in 244ms
1:11:09 PM [express] GET /src/components/ui/switch.tsx 304 in 224ms
1:11:09 PM [express] GET /api/serve-file 200 in 583ms
1:11:09 PM [express] GET /api/serve-file 200 in 707ms
1:11:09 PM [express] GET /src/lib/image-utils.ts 304 in 245ms
1:11:09 PM [express] GET /src/components/comments/comment-actions-drawer.tsx 304 in 295ms
1:11:09 PM [express] GET /src/components/ui/video-player.css 304 in 294ms
1:11:09 PM [express] GET /src/lib/memory-verse-utils.ts 304 in 266ms
1:11:10 PM [express] GET /src/components/ui/dropdown-menu.tsx 304 in 102ms
GET /api/user - Session: UH3c_aWn4nelcy_n0pgw3X22UStHK5tN
GET /api/user - Is Authenticated: true
GET /api/user - Session userId: undefined
GET /api/user - Passport user: 1
Authenticated user: 1
User data being returned: {"id":1,"username":"admin","avatarColor":"#F43F5E"}
1:11:11 PM [express] GET /sparta_circle_red.png 304 in 228ms
1:11:11 PM [express] GET /api/prayer-requests/unread 304 in 216ms :: {"unreadCount":0}
1:11:11 PM [express] GET /api/notifications 304 in 368ms :: [{"id":1239,"userId":1,"title":"Daily Re…
1:11:11 PM [express] GET /api/teams/1/competitive 304 in 657ms :: {"competitive":false}
Found 0 unread messages for user 1
1:11:12 PM [express] GET /api/messages/unread/count 304 in 436ms :: {"unreadCount":0}
1:11:12 PM [express] GET /api/posts/has-any-posts 304 in 503ms :: {"hasAnyPosts":true}
1:11:12 PM [express] GET /api/prayer-requests/unread 304 in 222ms :: {"unreadCount":0}
1:11:13 PM [express] GET /api/users/me 304 in 433ms :: {"id":1,"username":"admin","preferredName":"A…
1:11:13 PM [express] GET /api/achievements/unviewed 304 in 437ms :: []
1:11:13 PM [express] GET /api/notifications/unread 304 in 361ms :: {"unreadCount":2}
1:11:13 PM [express] GET /api/activities/current 304 in 364ms :: {"currentWeek":33,"currentDay":6,"p…
Attempting to download file from Object Storage: shared/uploads/1761256592431-image.jpeg
Attempting to download file from Object Storage: shared/uploads/1760233303176-image.jpeg
Download result for shared/uploads/1761256592431-image.jpeg: { type: 'object', hasOkProperty: true, isBuffer: false }
Successfully downloaded shared/uploads/1761256592431-image.jpeg, size: 12687 bytes
Attempting to download file from Object Storage: shared/uploads/1761010718301-image.jpeg
Attempting to download file from Object Storage: shared/uploads/1750156396520-image.jpeg
Download result for shared/uploads/1760233303176-image.jpeg: { type: 'object', hasOkProperty: true, isBuffer: false }
Successfully downloaded shared/uploads/1760233303176-image.jpeg, size: 12687 bytes
Attempting to download file from Object Storage: shared/uploads/1749775630019-image.jpeg
1:11:14 PM [express] GET /api/serve-file 200 in 219ms
Download result for shared/uploads/1761010718301-image.jpeg: { type: 'object', hasOkProperty: true, isBuffer: false }
Successfully downloaded shared/uploads/1761010718301-image.jpeg, size: 22197 bytes
1:11:14 PM [express] GET /api/serve-file 200 in 218ms
Download result for shared/uploads/1749775630019-image.jpeg: { type: 'object', hasOkProperty: true, isBuffer: false }
Successfully downloaded shared/uploads/1749775630019-image.jpeg, size: 12663 bytes
Download result for shared/uploads/1750156396520-image.jpeg: { type: 'object', hasOkProperty: true, isBuffer: false }
Successfully downloaded shared/uploads/1750156396520-image.jpeg, size: 179918 bytes
1:11:14 PM [express] GET /api/serve-file 200 in 251ms
1:11:14 PM [express] GET /api/serve-file 200 in 217ms
1:11:14 PM [express] GET /api/posts/774/reactions 200 in 217ms :: []
1:11:14 PM [express] GET /api/serve-file 200 in 365ms
1:11:15 PM [express] GET /api/posts/773/reactions 200 in 438ms :: []
1:11:15 PM [express] GET /api/posts/771/reactions 200 in 439ms :: []
1:11:15 PM [express] GET /api/posts/710/reactions 200 in 395ms :: []
1:11:15 PM [express] GET /api/posts/693/reactions 200 in 438ms :: []
1:11:16 PM [express] GET /api/posts/688/reactions 200 in 434ms :: []
1:11:16 PM [express] GET /api/posts/664/reactions 200 in 403ms :: []
1:11:16 PM [express] GET /api/posts/501/reactions 200 in 441ms :: [{"id":121,"userId":419,"postId":5…
1:11:16 PM [express] GET /api/posts/479/reactions 200 in 433ms :: []
1:11:16 PM [express] GET /api/posts/394/reactions 200 in 358ms :: []
1:11:17 PM [express] GET /api/posts/306/reactions 200 in 371ms :: []
1:11:17 PM [express] GET /api/posts/16/reactions 200 in 362ms :: []
1:11:24 PM [express] GET /api/notifications/unread 304 in 221ms :: {"unreadCount":2}
1:11:24 PM [express] GET /api/notifications/unread 304 in 223ms :: {"unreadCount":2}
1:11:24 PM [express] GET /api/notifications 304 in 451ms :: [{"id":1239,"userId":1,"title":"Daily Re…
GET /api/users - User authorization check: {
  userId: 1,
  isAdmin: true,
  isGroupAdmin: false,
  isTeamLead: false,
  teamId: 1
}
Getting unread messages by sender for user 1
Found 0 senders with unread messages
1:11:25 PM [express] GET /api/messages/unread/by-sender 200 in 151ms :: []
Sample user data: { id: 4013, username: 'Justin', avatarColor: '#8B5CF6' }
1:11:25 PM [express] GET /api/users 200 in 296ms :: [{"id":4013,"username":"Justin","preferredName":…
Fetching messages between user 1 and user 419
Building query for messages where: 
      (senderId=1 AND recipientId=419) OR 
      (senderId=419 AND recipientId=1)
Raw query returned 10 messages
Sample first message: {"id":49,"senderId":419,"recipientId":1,"content":"http://www.google.co...","hasImage":false,"is_video":false,"createdAt":"2025-05-20T21:59:09.025Z"}
Getting sender info for message 49 from user 419
Found sender: rmiller (419)
DEBUG: Message 49 imageUrl: "null" -> formatted: "null"
Getting sender info for message 50 from user 419
1:11:27 PM [express] POST /api/messages/read 200 in 150ms :: {"success":true}
Found sender: rmiller (419)
DEBUG: Message 50 imageUrl: "null" -> formatted: "null"
Getting sender info for message 55 from user 419
Found sender: rmiller (419)
DEBUG: Message 55 imageUrl: "null" -> formatted: "null"
Getting sender info for message 65 from user 419
Found sender: rmiller (419)
DEBUG: Message 65 imageUrl: "shared/uploads/1750293635326-1jqxex3sd5a-msg.png" -> formatted: "shared/uploads/1750293635326-1jqxex3sd5a-msg.png"
Getting sender info for message 66 from user 419
Getting unread messages by sender for user 1
Found sender: rmiller (419)
DEBUG: Message 66 imageUrl: "shared/uploads/1751566359498-13ib7glypum-msg.jpg" -> formatted: "shared/uploads/1751566359498-13ib7glypum-msg.jpg"
Getting sender info for message 69 from user 1
Found 0 unread messages for user 1
Found 0 senders with unread messages
Found sender: admin (1)
DEBUG: Message 69 imageUrl: "shared/uploads/1760376136520-19bv7j42ufk-msg.jpg" -> formatted: "shared/uploads/1760376136520-19bv7j42ufk-msg.jpg"
Getting sender info for message 73 from user 1
1:11:27 PM [express] GET /api/messages/unread/count 304 in 217ms :: {"unreadCount":0}
1:11:27 PM [express] GET /api/messages/unread/by-sender 304 in 222ms :: []
Found sender: admin (1)
DEBUG: Message 73 imageUrl: "null" -> formatted: "null"
Getting sender info for message 74 from user 1
Found sender: admin (1)
DEBUG: Message 74 imageUrl: "null" -> formatted: "null"
Getting sender info for message 75 from user 1
Found sender: admin (1)
DEBUG: Message 75 imageUrl: "null" -> formatted: "null"
Getting sender info for message 76 from user 1
Found sender: admin (1)
DEBUG: Message 76 imageUrl: "null" -> formatted: "null"
Found 10 messages with sender info
Message 65 (index 3) imageUrl: shared/uploads/1750293635326-1jqxex3sd5a-msg.png
Message 65 is_video: false
Message 66 (index 4) imageUrl: shared/uploads/1751566359498-13ib7glypum-msg.jpg
Message 66 is_video: false
Message 69 (index 5) imageUrl: shared/uploads/1760376136520-19bv7j42ufk-msg.jpg
Message 69 is_video: false
1:11:28 PM [express] GET /api/messages/419 200 in 1026ms :: [{"id":49,"senderId":419,"recipientId":1…
Attempting to download file from Object Storage: shared/uploads/1750293635326-1jqxex3sd5a-msg.png
Attempting to download file from Object Storage: shared/uploads/1760376136520-19bv7j42ufk-msg.jpg
Download result for shared/uploads/1750293635326-1jqxex3sd5a-msg.png: { type: 'object', hasOkProperty: true, isBuffer: false }
Successfully downloaded shared/uploads/1750293635326-1jqxex3sd5a-msg.png, size: 37678 bytes
1:11:28 PM [express] GET /api/serve-file 200 in 165ms
Download result for shared/uploads/1760376136520-19bv7j42ufk-msg.jpg: { type: 'object', hasOkProperty: true, isBuffer: false }
Successfully downloaded shared/uploads/1760376136520-19bv7j42ufk-msg.jpg, size: 22197 bytes
1:11:28 PM [express] GET /api/serve-file 200 in 166ms
Attempting to download file from Object Storage: shared/uploads/1751566359498-13ib7glypum-msg.jpg
Download result for shared/uploads/1751566359498-13ib7glypum-msg.jpg: { type: 'object', hasOkProperty: true, isBuffer: false }
Successfully downloaded shared/uploads/1751566359498-13ib7glypum-msg.jpg, size: 37678 bytes
1:11:28 PM [express] GET /api/serve-file 200 in 166ms
1:11:29 PM [express] GET /api/notifications/unread 304 in 182ms :: {"unreadCount":2}
Attempting to download file from Object Storage: shared/uploads/1750293635326-1jqxex3sd5a-msg.png
Attempting to download file from Object Storage: shared/uploads/1760376136520-19bv7j42ufk-msg.jpg
Attempting to download file from Object Storage: shared/uploads/1751566359498-13ib7glypum-msg.jpg
Download result for shared/uploads/1750293635326-1jqxex3sd5a-msg.png: { type: 'object', hasOkProperty: true, isBuffer: false }
Successfully downloaded shared/uploads/1750293635326-1jqxex3sd5a-msg.png, size: 37678 bytes
Download result for shared/uploads/1760376136520-19bv7j42ufk-msg.jpg: { type: 'object', hasOkProperty: true, isBuffer: false }
Successfully downloaded shared/uploads/1760376136520-19bv7j42ufk-msg.jpg, size: 22197 bytes
1:11:30 PM [express] GET /api/serve-file 200 in 158ms
Download result for shared/uploads/1751566359498-13ib7glypum-msg.jpg: { type: 'object', hasOkProperty: true, isBuffer: false }
Successfully downloaded shared/uploads/1751566359498-13ib7glypum-msg.jpg, size: 37678 bytes
1:11:30 PM [express] GET /api/serve-file 200 in 150ms
1:11:30 PM [express] GET /api/serve-file 200 in 162ms
1:11:31 PM [express] GET /activity 200 in 80ms
1:11:31 PM [express] GET /src/main.tsx 200 in 91ms
1:11:31 PM [express] GET /@vite/client 200 in 146ms
1:11:31 PM [express] GET /@react-refresh 304 in 88ms
1:11:31 PM [express] GET /src/App.tsx 200 in 87ms
1:11:31 PM [express] GET /@fs/home/runner/workspace/node_modules/vite/dist/client/env.mjs 304 in 141…
1:11:32 PM [express] GET /src/index.css 200 in 86ms
1:11:32 PM [express] GET /src/lib/queryClient.ts 304 in 128ms
1:11:32 PM [express] GET /src/components/error-boundary.tsx 304 in 130ms
1:11:32 PM [express] GET /src/hooks/use-auth.tsx 304 in 74ms
1:11:32 PM [express] GET /src/hooks/use-achievements.tsx 304 in 99ms
1:11:32 PM [express] GET /src/components/ui/toaster.tsx 304 in 122ms
1:11:32 PM [express] GET /src/pages/auth-page.tsx 304 in 100ms
1:11:32 PM [express] GET /src/pages/home-page.tsx 304 in 104ms
1:11:33 PM [express] GET /src/pages/activity-page.tsx 304 in 120ms
1:11:33 PM [express] GET /src/pages/activity-management.tsx 304 in 100ms
1:11:33 PM [express] GET /src/pages/help-page.tsx 304 in 118ms
1:11:33 PM [express] GET /src/pages/notifications-page.tsx 304 in 114ms
1:11:33 PM [express] GET /src/pages/admin-page.tsx 304 in 77ms
1:11:33 PM [express] GET /src/pages/group-admin-page.tsx 304 in 85ms
1:11:33 PM [express] GET /src/pages/menu-page.tsx 304 in 73ms
1:11:33 PM [express] GET /src/components/vertical-nav.tsx 304 in 75ms
1:11:34 PM [express] GET /src/pages/notification-settings-page.tsx 304 in 131ms
1:11:34 PM [express] GET /src/pages/leaderboard-page.tsx 304 in 133ms
1:11:34 PM [express] GET /src/debug-api.tsx 304 in 75ms
1:11:34 PM [express] GET /src/components/achievements/achievements-container.tsx 304 in 108ms
1:11:34 PM [express] GET /src/pages/prayer-requests-page.tsx 304 in 117ms
1:11:34 PM [express] GET /src/pages/video-player-page.tsx 304 in 111ms
1:11:34 PM [express] GET /src/pages/waiver-page.tsx 304 in 73ms
1:11:34 PM [express] GET /src/pages/comments-page.tsx 304 in 147ms
1:11:34 PM [express] GET /src/hooks/use-toast.ts 304 in 144ms
1:11:35 PM [express] GET /src/components/ui/card.tsx 304 in 138ms
1:11:35 PM [express] GET /src/components/ui/toast.tsx 304 in 81ms
1:11:35 PM [express] GET /src/components/ui/button.tsx 304 in 140ms
1:11:35 PM [express] GET /src/components/ui/input.tsx 304 in 122ms
1:11:35 PM [express] GET /src/components/ui/form.tsx 304 in 100ms
1:11:35 PM [express] GET /@fs/home/runner/workspace/shared/schema.ts 304 in 118ms
1:11:35 PM [express] GET /src/components/ui/tabs.tsx 304 in 132ms
1:11:35 PM [express] GET /src/components/post-card.tsx 304 in 88ms
1:11:35 PM [express] GET /src/components/create-post-dialog.tsx 304 in 134ms
1:11:36 PM [express] GET /src/hooks/use-post-limits.ts 304 in 96ms
1:11:36 PM [express] GET /src/components/app-layout.tsx 304 in 101ms
1:11:36 PM [express] GET /src/hooks/use-mobile.tsx 304 in 75ms
1:11:36 PM [express] GET /src/components/messaging/message-slide-card.tsx 200 in 127ms
1:11:36 PM [express] GET /src/hooks/use-prayer-requests.tsx 304 in 117ms
1:11:36 PM [express] GET /src/hooks/use-restore-scroll.ts 304 in 75ms
1:11:36 PM [express] GET /src/components/ui/collapsible.tsx 304 in 133ms
1:11:36 PM [express] GET /src/components/ui/select.tsx 304 in 73ms
1:11:37 PM [express] GET /src/components/ui/youtube-player.tsx 304 in 356ms
1:11:37 PM [express] GET /src/components/ui/dialog.tsx 304 in 73ms
1:11:37 PM [express] GET /src/components/ui/label.tsx 304 in 79ms
1:11:37 PM [express] GET /src/components/ui/scroll-area.tsx 304 in 77ms
1:11:37 PM [express] GET /src/components/rich-text-editor.tsx 304 in 145ms
1:11:37 PM [express] GET /src/components/ui/textarea.tsx 304 in 74ms
1:11:37 PM [express] GET /src/components/ui/popover.tsx 304 in 142ms
1:11:37 PM [express] GET /src/components/ui/calendar.tsx 304 in 142ms
1:11:37 PM [express] GET /src/components/bottom-nav.tsx 304 in 73ms
1:11:38 PM [express] GET /src/hooks/use-swipe-to-close.ts 304 in 92ms
1:11:38 PM [express] GET /src/components/ui/alert-dialog.tsx 304 in 127ms
1:11:38 PM [express] GET /src/components/ui/checkbox.tsx 304 in 94ms
1:11:38 PM [express] GET /src/components/ui/badge.tsx 304 in 107ms
1:11:38 PM [express] GET /src/components/ui/sheet.tsx 304 in 107ms
1:11:38 PM [express] GET /src/components/invite-qr-code.tsx 304 in 74ms
1:11:39 PM [express] GET /src/components/ui/avatar.tsx 304 in 131ms
1:11:39 PM [express] GET /src/pages/profile-page.tsx 304 in 89ms
1:11:39 PM [express] GET /src/pages/support-sparta-page.tsx 304 in 130ms
1:11:39 PM [express] GET /src/pages/invite-code-page.tsx 304 in 134ms
1:11:39 PM [express] GET /src/components/notification-settings.tsx 304 in 87ms
1:11:39 PM [express] GET /src/pages/welcome-page.tsx 304 in 132ms
1:11:39 PM [express] GET /src/lib/utils.ts 304 in 129ms
1:11:39 PM [express] GET /src/hooks/use-notifications.tsx 304 in 90ms
1:11:39 PM [express] GET /src/components/ui/tooltip.tsx 304 in 129ms
1:11:40 PM [express] GET /src/components/achievements/achievement-badge.tsx 304 in 98ms
1:11:40 PM [express] GET /src/lib/media-utils.ts 304 in 99ms
1:11:40 PM [express] GET /src/components/comments/post-view.tsx 304 in 74ms
^A1:11:40 PM [express] GET /src/components/comments/comment-list.tsx 304 in 133ms
1:11:40 PM [express] GET /src/components/comments/comment-form.tsx 304 in 134ms
1:11:40 PM [express] GET /src/hooks/use-keyboard-adjustment.ts 304 in 74ms
1:11:40 PM [express] GET /src/components/signature-pad.tsx 304 in 91ms
1:11:40 PM [express] GET /src/components/reaction-button.tsx 304 in 132ms
1:11:40 PM [express] GET /src/components/reaction-summary.tsx 304 in 90ms
1:11:41 PM [express] GET /src/hooks/use-comment-count.tsx 304 in 118ms
1:11:41 PM [express] GET /src/components/comments/comment-drawer.tsx 304 in 119ms
1:11:41 PM [express] GET /src/components/ui/video-player.tsx 304 in 74ms
1:11:41 PM [express] GET /src/components/ui/image-viewer.tsx 304 in 133ms
1:11:41 PM [express] GET /src/lib/url-utils.ts 304 in 130ms
1:11:41 PM [express] GET /src/components/messaging/message-form.tsx 304 in 75ms
1:11:41 PM [express] GET /src/hooks/use-keyboard-adjustment-messages.ts 200 in 139ms
1:11:41 PM [express] GET /src/components/change-password-form.tsx 304 in 138ms
1:11:41 PM [express] GET /src/components/ui/switch.tsx 304 in 73ms
1:11:42 PM [express] GET /src/lib/image-utils.ts 304 in 90ms
1:11:42 PM [express] GET /src/components/comments/comment-actions-drawer.tsx 304 in 130ms
1:11:42 PM [express] GET /src/components/ui/dropdown-menu.tsx 304 in 91ms
1:11:42 PM [express] GET /src/components/ui/video-player.css 304 in 75ms
1:11:42 PM [express] GET /src/lib/memory-verse-utils.ts 304 in 75ms
GET /api/user - Session: HOp_5tfBNKPqU7RuWr-bkFMMlLrrUz1K
GET /api/user - Is Authenticated: true
GET /api/user - Session userId: undefined
GET /api/user - Passport user: 1
Authenticated user: 1
User data being returned: {"id":1,"username":"admin","avatarColor":"#F43F5E"}